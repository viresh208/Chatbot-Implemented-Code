# Hospital Booking Chatbot - Visual Diagrams

## 1. CLEAN ARCHITECTURE LAYERS

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API LAYER (Outermost)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Controllers:                                         â”‚  â”‚
â”‚  â”‚  - ChatbotController    - PatientsController         â”‚  â”‚
â”‚  â”‚  - ClinicsController    - DoctorsController          â”‚  â”‚
â”‚  â”‚  - AppointmentsController                            â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Web UI:                                             â”‚  â”‚
â”‚  â”‚  - index.html  - styles.css  - app.js               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“ depends on                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            INFRASTRUCTURE LAYER                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Service Implementations (Dummy Data):         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - SessionService                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - PatientService                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - ClinicService                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - DoctorService                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - AppointmentService                          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“ implements                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            APPLICATION LAYER                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Interfaces (Contracts):                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - IChatbotService   - ISessionService         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - IPatientService   - IClinicService          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - IDoctorService    - IAppointmentService     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Core Service:                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - ChatbotService (State Machine Logic)       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  DTOs:                                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - ChatMessageRequest/Response                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - AuthenticationRequest/Response             â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“ uses                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         DOMAIN LAYER (Core - Innermost)               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Entities (Pure Business Objects):             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Patient                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Doctor                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Clinic                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Appointment (+ TimeSlot)                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - ChatSession (+ ConversationState enum)     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  No Dependencies - Pure C# Classes             â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## 2. CONVERSATION STATE MACHINE

                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ Initial â”‚
                         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                              â”‚
                              â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  AwaitingName    â”‚ â† User provides name
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ AwaitingDateOfBirth     â”‚ â† User provides DOB
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“ (Authenticate)
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Authenticated â”‚ â† Auto transition
                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ AwaitingClinicSelection      â”‚ â† User selects clinic
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ AwaitingDoctorOrSymptom      â”‚ â† Choice: View all or symptoms
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                         â”‚
              â†“                         â†“
        Option "1"              Option "2" or symptoms
     (View all doctors)        (Describe symptoms)
              â”‚                         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ AwaitingDoctorSelection      â”‚ â† User selects doctor
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ AwaitingSlotSelection        â”‚ â† User selects time slot
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ BookingConfirmed             â”‚ â† Success message
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚Completed â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## 3. REQUEST FLOW DIAGRAM

User Browser                                                Server
     â”‚                                                         â”‚
     â”‚  1. Click "Start Chat"                                 â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚       POST /api/chatbot/start                          â”‚
     â”‚                                                         â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  2. Response: { sessionId: "guid" }                    â”‚
     â”‚                                                         â”‚
     â”‚  3. Send Message                                       â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚       POST /api/chatbot/message                        â”‚
     â”‚       Body: { sessionId, message }                     â”‚
     â”‚                                                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
     â”‚                                                    â”‚ Chatbot â”‚
     â”‚                                                    â”‚ Service â”‚
     â”‚                                                    â”‚         â”‚
     â”‚                                                    â”‚ State   â”‚
     â”‚                                                    â”‚ Machine â”‚
     â”‚                                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                                                         â”‚
     â”‚                                                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
     â”‚                                                    â”‚ Domain  â”‚
     â”‚                                                    â”‚Services â”‚
     â”‚                                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  4. Response: { message, state, options }              â”‚
     â”‚                                                         â”‚
     â”‚  5. Display message & options                          â”‚
     â”‚                                                         â”‚
     â”‚  6. User selects option                                â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚       POST /api/chatbot/message                        â”‚
     â”‚       Body: { sessionId, message: "selected-value" }   â”‚
     â”‚                                                         â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚  7. Next state response                                â”‚
     â”‚                                                         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€(Repeat)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## 4. DATA FLOW - COMPLETE BOOKING EXAMPLE

Step 1: User Input
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User types:       â”‚
â”‚  "John Doe"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â†“
Step 2: API Layer
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatbotController                  â”‚
â”‚ .SendMessage(request)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â†“
Step 3: Application Layer
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatbotService                     â”‚
â”‚ .ProcessMessageAsync()             â”‚
â”‚   â”œâ”€ GetSession                    â”‚
â”‚   â”œâ”€ Check State (AwaitingName)    â”‚
â”‚   â”œâ”€ Validate Input                â”‚
â”‚   â”œâ”€ Store in Context              â”‚
â”‚   â””â”€ Transition to next state      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â†“
Step 4: Session Update
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SessionService                     â”‚
â”‚ .UpdateSession(session)            â”‚
â”‚   â””â”€ Store in Dictionary           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â†“
Step 5: Response Creation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatMessageResponse                â”‚
â”‚ {                                  â”‚
â”‚   message: "Please enter DOB",     â”‚
â”‚   currentState: AwaitingDateOfBirthâ”‚
â”‚   isCompleted: false               â”‚
â”‚ }                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â†“
Step 6: API Response
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JSON returned to client            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â†“
Step 7: UI Update
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend (app.js)                  â”‚
â”‚ - Add bot message to chat          â”‚
â”‚ - Show next input field            â”‚
â”‚ - Enable user interaction          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## 5. DEPENDENCY INJECTION FLOW

Program.cs Startup
       â”‚
       â”œâ”€ builder.Services.AddScoped<IChatbotService, ChatbotService>()
       â”‚        â”‚
       â”‚        â””â”€ Requires: ISessionService, IPatientService, IClinicService,
       â”‚                    IDoctorService, IAppointmentService
       â”‚
       â”œâ”€ builder.Services.AddScoped<ISessionService, SessionService>()
       â”œâ”€ builder.Services.AddScoped<IPatientService, PatientService>()
       â”œâ”€ builder.Services.AddScoped<IClinicService, ClinicService>()
       â”œâ”€ builder.Services.AddScoped<IDoctorService, DoctorService>()
       â””â”€ builder.Services.AddScoped<IAppointmentService, AppointmentService>()

Runtime - HTTP Request Arrives
       â”‚
       â†“
DI Container Creates Instance Chain
       â”‚
       â”œâ”€ ChatbotController
       â”‚      â””â”€ requires IChatbotService
       â”‚            â”‚
       â”‚            â”œâ”€ DI resolves: ChatbotService
       â”‚            â”‚      â”‚
       â”‚            â”‚      â”œâ”€ requires ISessionService â†’ SessionService
       â”‚            â”‚      â”œâ”€ requires IPatientService â†’ PatientService
       â”‚            â”‚      â”œâ”€ requires IClinicService â†’ ClinicService
       â”‚            â”‚      â”œâ”€ requires IDoctorService â†’ DoctorService
       â”‚            â”‚      â””â”€ requires IAppointmentService â†’ AppointmentService
       â”‚            â”‚
       â”‚            â””â”€ All dependencies injected via constructor
       â”‚
       â†“
Controller Method Executes
       â”‚
       â””â”€ Calls ChatbotService methods with full dependency graph

## 6. SYMPTOM MATCHING ALGORITHM FLOW

User Input: "headache and fever"
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DoctorService.GetDoctorsBySymptomsAsync()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
        Convert to lowercase
        "headache and fever"
               â”‚
               â†“
     Loop through all doctors
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“             â†“          â†“          â†“
   Dr. Sarah     Dr. Robert  Dr. Emily  Dr. David
   Symptoms:     Symptoms:   Symptoms:  Symptoms:
   [fever,       [chest      [child     [skin
    cold,         pain,       fever,     rash,
    cough,        heart       vaccine]   acne]
    headache]     issues]
        â”‚             â”‚          â”‚          â”‚
        â†“             â†“          â†“          â†“
   Match: 2      Match: 0   Match: 0   Match: 0
   (fever,       (none)     (none)     (none)
    headache)
        â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
        Sort by match count
               â”‚
               â†“
    Return: [Dr. Sarah Williams]

## 7. UI COMPONENT HIERARCHY

index.html
â””â”€â”€ <div class="container">
    â”œâ”€â”€ <div class="chat-header">
    â”‚   â””â”€â”€ <div class="header-content">
    â”‚       â”œâ”€â”€ <div class="header-icon">ğŸ¥
    â”‚       â””â”€â”€ <div class="header-text">
    â”‚           â”œâ”€â”€ <h1>Hospital Booking Assistant
    â”‚           â””â”€â”€ <p>Online
    â”‚
    â”œâ”€â”€ <div class="chat-container" id="chatContainer">
    â”‚   â”œâ”€â”€ <div class="welcome-message">
    â”‚   â”‚   â”œâ”€â”€ <div class="welcome-icon">ğŸ‘‹
    â”‚   â”‚   â”œâ”€â”€ <h2>Welcome
    â”‚   â”‚   â””â”€â”€ <p>Click Start Chat
    â”‚   â”‚
    â”‚   â”œâ”€â”€ <div class="message bot"> (added dynamically)
    â”‚   â”‚   â”œâ”€â”€ <div class="bot-icon">ğŸ¤–
    â”‚   â”‚   â””â”€â”€ <div class="message-content">Bot message
    â”‚   â”‚
    â”‚   â”œâ”€â”€ <div class="message user"> (added dynamically)
    â”‚   â”‚   â””â”€â”€ <div class="message-content">User message
    â”‚   â”‚
    â”‚   â””â”€â”€ <div class="options-container"> (added dynamically)
    â”‚       â””â”€â”€ <button class="option-btn">Option
    â”‚
    â””â”€â”€ <div class="input-container">
        â”œâ”€â”€ <button id="startBtn">Start Chat
        â””â”€â”€ <div id="inputArea" class="input-area">
            â”œâ”€â”€ <input id="userInput">
            â””â”€â”€ <button id="sendBtn">Send

## 8. SESSION CONTEXT EVOLUTION

Session Created
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatSession {                        â”‚
â”‚   Id: guid,                          â”‚
â”‚   State: Initial,                    â”‚
â”‚   Context: {}                        â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“ User provides name
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatSession {                        â”‚
â”‚   Id: guid,                          â”‚
â”‚   State: AwaitingDateOfBirth,        â”‚
â”‚   Context: {                         â”‚
â”‚     "Name": "John Doe"               â”‚
â”‚   }                                  â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“ User provides DOB & authenticated
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatSession {                        â”‚
â”‚   Id: guid,                          â”‚
â”‚   PatientId: guid,                   â”‚
â”‚   State: AwaitingClinicSelection,    â”‚
â”‚   Context: {                         â”‚
â”‚     "Name": "John Doe",              â”‚
â”‚     "DateOfBirth": "1990-05-15"      â”‚
â”‚   }                                  â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“ User selects clinic
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatSession {                        â”‚
â”‚   Id: guid,                          â”‚
â”‚   PatientId: guid,                   â”‚
â”‚   State: AwaitingDoctorOrSymptom,    â”‚
â”‚   Context: {                         â”‚
â”‚     "Name": "John Doe",              â”‚
â”‚     "DateOfBirth": "1990-05-15",     â”‚
â”‚     "ClinicId": "c111...",           â”‚
â”‚     "ClinicName": "City General"     â”‚
â”‚   }                                  â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â†“ ... continues until booking

## 9. FILE DEPENDENCY GRAPH

Program.cs
    â”‚
    â”œâ”€ references Controllers
    â”‚       â”‚
    â”‚       â””â”€ ChatbotController.cs
    â”‚           â””â”€ uses IChatbotService (from Application)
    â”‚
    â””â”€ configures DI
        â”‚
        â”œâ”€ Application Layer
        â”‚   â”œâ”€ ChatbotService.cs â”€â”€â”€â”€â”
        â”‚   â”‚   â””â”€ uses interfaces    â”‚
        â”‚   â”‚                          â”‚
        â”‚   â”œâ”€ Interfaces              â”‚
        â”‚   â”‚   â”œâ”€ IChatbotService â—„â”€â”€â”€â”˜
        â”‚   â”‚   â”œâ”€ ISessionService
        â”‚   â”‚   â”œâ”€ IPatientService
        â”‚   â”‚   â”œâ”€ IClinicService
        â”‚   â”‚   â”œâ”€ IDoctorService
        â”‚   â”‚   â””â”€ IAppointmentService
        â”‚   â”‚           â–²
        â”‚   â””â”€ DTOs     â”‚
        â”‚               â”‚
        â”œâ”€ Infrastructure Layer
        â”‚   â””â”€ Services â”‚
        â”‚       â”œâ”€ SessionService â”€â”€â”€â”€â”€â”€â”€â”˜ implements
        â”‚       â”œâ”€ PatientService â”€â”€â”€â”€â”€â”€â”€â”˜ implements
        â”‚       â”œâ”€ ClinicService â”€â”€â”€â”€â”€â”€â”€â”€â”˜ implements
        â”‚       â”œâ”€ DoctorService â”€â”€â”€â”€â”€â”€â”€â”€â”˜ implements
        â”‚       â””â”€ AppointmentService â”€â”€â”€â”˜ implements
        â”‚
        â””â”€ Domain Layer (used by all)
            â””â”€ Entities
                â”œâ”€ Patient.cs
                â”œâ”€ Doctor.cs
                â”œâ”€ Clinic.cs
                â”œâ”€ Appointment.cs
                â””â”€ ChatSession.cs

## 10. PRODUCTION DEPLOYMENT ARCHITECTURE (Future)

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Internet   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Load Balancer â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                â”‚                â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚  API       â”‚   â”‚  API       â”‚   â”‚  API       â”‚
    â”‚  Instance 1â”‚   â”‚  Instance 2â”‚   â”‚  Instance 3â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚   Redis     â”‚      â”‚  SQL Server  â”‚
         â”‚  (Sessions) â”‚      â”‚  (Database)  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

This architecture is ready for this deployment model with minimal changes!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
End of Diagrams
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
